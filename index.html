<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Hexadecimal Clock</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
        }

        #container {
            width: 100vw;
            height: 100vh;
        }

        #pika {
            display: none;
        }
    </style>
</head>
<body>
<link rel="prefetch" href="pikachu_l1.png" as="image">
<link rel="prefetch" href="pikachu_l2.png" as="image">
<link rel="prefetch" href="pikachu_l3.png" as="image">
<link rel="prefetch" href="pikachu_l4.png" as="image">
<link rel="prefetch" href="pikachu_r1.png" as="image">
<link rel="prefetch" href="pikachu_r2.png" as="image">
<link rel="prefetch" href="pikachu_r3.png" as="image">
<link rel="prefetch" href="pikachu_r4.png" as="image">
<div id="container">
    <img id="pika" src="pikachu_r1.png" alt="">
</div>
<script>

    var pikachu = $("#pika");
    doc = $(document);
    var today, h, m, s, oddHour, oddMinute, hhex, mhex, shex, hex;
    var spritenumber = 1;

    var getDate = function () {
        today = new Date();
        h = today.getHours();
        m = today.getMinutes();
        s = today.getSeconds();
    };
    var getOddMinute = function () {
        if (m % 2 === 0) {
            oddMinute = "l"
        } else {
            oddMinute = "r"
        }
    };

    var getOddHour = function () {
        if (h % 2 === 0) {
            oddHour = "l"
        } else {
            oddHour = "r"
        }
    };

    var getPaddingLeft = function () {
        if (oddMinute === "r") {
            pikachu.css("padding-left", (s * ((doc.width() - pikachu.width()) / doc.width() * 100 / 60)).toString() + "vw");

        } else if (oddMinute === "l") {
            pikachu.css("padding-left", ((60 - s ) * ((doc.width() - pikachu.width()) / doc.width() * 100 / 60)).toString() + "vw");

        }
    };

    var getPaddingTop = function () {
        if (oddHour === "r") {
            pikachu.css("padding-top", ((m * 60 + s) * ((doc.height() - pikachu.height()) / doc.height() * 100 / 3600)).toString() + "vh");


        } else if (oddHour === "l") {
            pikachu.css("padding-top", ((3600 - (m * 60 + s) ) * ((doc.height() - pikachu.height()) / doc.height() * 100 / 3600)).toString() + "vh");

        }
    };

    var getSprite = function () {
        pikachu.css("display", "inline-block");
        spritenumber++;
        if (spritenumber >= 5) {
            spritenumber = 1;
        }
        pikachu.attr("src", "pikachu_" + oddMinute + spritenumber + ".png");
    };

    var getHexClock = function () {
        hhex = Math.floor(h * 11).toString(16);
        mhex = Math.floor(m * 4.3).toString(16);
        shex = Math.floor(s * 4.3).toString(16);
        console.log(hhex, mhex, shex);
        if (hhex.length === 1) {
            hhex = "0" + hhex;
        }
        if (mhex.length === 1) {
            mhex = "0" + mhex;
        }
        if (shex.length === 1) {
            shex = "0" + shex;
        }

        hex = "#" + hhex + mhex + shex;
        $("#container").css("background-color", hex);
    };

    var updatePika = function () {
        getDate();
        getOddHour();
        getOddMinute();
        getPaddingLeft();
        getPaddingTop();
        getSprite();
        getHexClock();
    };

    $('document').ready(function () {
        setInterval(function () {
            updatePika();
        }, 1000);
    });

</script>

</body>
</html>